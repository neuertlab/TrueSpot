# Spot Detection Module - Output File Descriptions
This page describes the various output files generated by the Spot Detection module. Some of these are optional and can be controlled by certain arguments or debug level.

## MAT Files
Files with the `.mat` extension are MATLAB data files. They are generally used to store variables/data from a workspace or program or whatnot on disc for use across sessions or systems. These files contain MATLAB data structures/variables as compressed binary data and cannot be read in a text editor. However, they are by design very easy to load and view in MATLAB. In the IDE GUI this is as simple as dragging and dropping the MAT file into the workspace panel on the right that lists environment variables. Programmatically, the built-in `load` and `save` functions are all that are needed to read and write these files.

TrueSpot outputs MAT files by default simply because they are smaller than text files with the same data and it makes parsing much easier for downstream modules. However, there are options for dumping output information to standard text tables as well.

## Standard Outputs
The standard output files contain the basic run information and results. Without any extra specified arguments, four files will be output for the sample. If a control is provided, these same four files will be output for the control. If background extraction is successful for control usage, these four files will be generated from the sample files with background mask applied and the mask itself along with some informational figures will be saved in the output directory.

### SpotsRun File
The run parameters and threshold selection details are saved to `${OUTSTEM}_rnaspotsrun.mat`. The value of the automatic threshold selection can be found here. The contents of this file are the structs that serve as the instance variables for an instance of `RNASpotsRun`. By grouping all of the parameters into larger structs and saving the structs instead of the object instance itself, the MAT file can be read properly even without `RNASpotsRun.m`.

Contents (as of version 1.0.0)
* `run_info`: Top level struct replacing object instance - holds the other structs
	* `RNASpotsRunVersion`: Version number of the `RNASpotsRun` class that generated this save.
	* `img_name`: Name assigned to sample.
	* `intensity_threshold`: Intensity value of the automatically selected threshold. If 0, thresholding failed or has not been run.
	* `threshold_results`: A struct containing the detailed results of the thresholding.
	* `paths`: A struct containing path variables for this run such as the input and output.
	* `channels`: A struct containing channel number variables for this run.
	* `th_params`: A struct containing thresholding parameters for this run.
	* `dims`: A struct containing parameters/measurements relating to image or image element dimensions.
	* `meta`: A struct containing metadata attached to this run, such as the probe or target name.
	* `options`: A struct containing miscellaneous run parameters.

### Call Table
The full table of spot calls is saved to `${OUTSTEM}_callTable.mat`. This file contains a single MATLAB variable: a table called `call_table`. 

The table should have at least 7 columns:
* **coord_1d**: MATLAB 1D coordinate of voxel marking local maximum.
* **isnap_x**: X coordinate of voxel marking local maximum. ("isnap" = "integer snap")
* **isnap_y**: Y coordinate of voxel marking local maximum.
* **isnap_z**: Z coordinate of voxel marking local maximum.
* **intensity_f**: Intensity value of voxel after LoG filter application.
* **intensity**: Intensity value of voxel in raw image.
* **dropout_thresh**: Maximum threshold value where this spot is called as a local maximum.

All coordinates are 1-based for MATLAB use. If dumping from this binary file for use in other programming interfaces like Python, it is good to remember that you will need to subtract 1 from all x,y, and z coordinates for 0-based indexing.

### Spot Table

### Dead Pixels File

### Background Extraction files

## Optional Outputs

### CSV Tables

### Parameter/Threshold Dump

### Debug Outputs